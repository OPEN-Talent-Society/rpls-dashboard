{
  "version": "1.0.0",
  "created": "2025-12-01T01:50:00Z",
  "updated": "2025-12-02T03:30:00Z",
  "entries": [
    {
      "id": "learning-codebuild-audit-001",
      "timestamp": "2025-11-30T09:45:00Z",
      "topic": "Codebuild Folder Audit - Complete Structure",
      "category": "infrastructure",
      "agent": "claude-code",
      "content": "Comprehensive audit of /Users/adamkovacs/Documents/codebuild: 14 git repositories across 5 categories. Main Projects: project-campfire (AI Enablement Academy, 1.1G), ttf-web/ttf-web-nextjs (TTF platform), labor-market-dashboard/pulse (workforce analytics), openskills (skills taxonomy). Claude Infrastructure: 3 variants (claude-code, claude-zai, claude-zai-flow) with hardlinked hooks and symlinked .agentdb for shared state. Skills Ecosystem: 51 skills installed, universal-skills MCP server. MCP Servers: mcp-servers (collection), codex-subagents-mcp, universal-skills-mcp. Sandboxes: codex-sandbox, taylormade. Central .env at codebuild root provides all credentials.",
      "tags": [
        "codebuild",
        "audit",
        "infrastructure",
        "projects"
      ],
      "related_docs": []
    },
    {
      "id": "learning-codebuild-audit-002",
      "timestamp": "2025-11-30T09:45:00Z",
      "topic": "Codebuild Projects Catalog",
      "category": "projects",
      "agent": "claude-code",
      "content": "14 active projects: project-campfire (Next.js 15, React 19 learning platform), ttf-web-nextjs (workforce analytics Next.js), labor-market-dashboard (React dashboard), labor-market-pulse (data pipeline), openskills (skills taxonomy), opentalent-skills-app (skills matching), universal-agents (agent framework), universal-skills (MCP skills server), reasoningbank (reasoning patterns), skills-to-agents (agent compilation), mcp-servers (MCP collection), codex-subagents-mcp (Codex subagents), codex-sandbox (experimental), taylormade (custom solutions).",
      "tags": [
        "projects",
        "catalog",
        "codebuild"
      ],
      "related_docs": []
    },
    {
      "id": "learning-codebuild-audit-003",
      "timestamp": "2025-11-30T09:45:00Z",
      "topic": "Claude Infrastructure Architecture",
      "category": "infrastructure",
      "agent": "claude-code",
      "content": "Three Claude Code variants share infrastructure: claude-code (base), claude-zai (Z.AI integration), claude-zai-flow (swarm orchestration). Hardlinked hooks ensure all variants execute same automation. Symlinked .agentdb provides unified local JSON storage. Each variant has specific MCP server configurations in settings.json. Memory flows: Claude Flow (in-memory) → Supabase (cloud persistence) → AgentDB (local JSON). Skills folder contains 51 skills from anthropics/skills, ComposioHQ/awesome-claude-skills, and custom skills.",
      "tags": [
        "claude",
        "infrastructure",
        "variants",
        "memory"
      ],
      "related_docs": []
    },
    {
      "id": "learning-001",
      "timestamp": "2025-11-30T01:50:00Z",
      "topic": "Hook Automation Configuration",
      "category": "infrastructure",
      "agent": "claude-code",
      "content": "Configured settings.json to automatically trigger hooks on all tool operations. PreToolUse/PostToolUse for Bash, Write/Edit, and Search operations. UserPromptSubmit for solution checking. Stop for session cleanup. Notification for error handling.",
      "tags": [
        "hooks",
        "automation",
        "settings"
      ],
      "related_docs": [
        "20251201014848-7lsbbhp",
        "20251201014907-ke8xjvt"
      ]
    },
    {
      "id": "learning-002",
      "timestamp": "2025-11-30T01:45:00Z",
      "topic": "Progressive Disclosure Pattern",
      "category": "patterns",
      "agent": "claude-code",
      "content": "Implemented progressive disclosure skill for context efficiency. Three-level loading (metadata → content → deep context) reduces token usage by up to 98.7%. Tool search pattern replaces static tool definitions.",
      "tags": [
        "progressive-disclosure",
        "tokens",
        "efficiency"
      ],
      "related_docs": []
    },
    {
      "id": "learning-003",
      "timestamp": "2025-11-30T01:30:00Z",
      "topic": "Memory Systems Reality Check",
      "category": "infrastructure",
      "agent": "claude-code",
      "content": "Claude Flow memory is IN-MEMORY ONLY - not persistent. AgentDB, RUVector, Synapse, ReasoningBank are skills/concepts, not running services. Actual persistent storage requires: Cortex (SiYuan), NocoDB, Supabase, or file-based JSON.",
      "tags": [
        "memory",
        "persistence",
        "infrastructure"
      ],
      "related_docs": []
    },
    {
      "id": "learning-d263c7fd8fc41d72",
      "timestamp": "2025-12-01T02:08:03Z",
      "topic": "Dual Storage Test",
      "category": "infrastructure",
      "agent": "claude-code",
      "content": "Testing that both local file and Supabase cloud storage work correctly after context continuation\n",
      "tags": [
        "infrastructure",
        "automated"
      ],
      "related_docs": []
    },
    {
      "id": "learning-4ca5f8209641aef3",
      "timestamp": "2025-12-01T02:15:24Z",
      "topic": "Progressive Disclosure Methodology",
      "category": "methodology",
      "agent": "claude-code",
      "content": "Token efficiency pattern achieving 98.7% reduction through three-level skills disclosure (metadata only at startup, SKILL.md on-demand, bundled files selective access) and tool search meta-tool. Replaces static tool definitions with dynamic discovery.\n",
      "tags": [
        "methodology",
        "automated"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cc0aa0bc1e6bf903",
      "timestamp": "2025-12-01T02:15:29Z",
      "topic": "Continuous Improvement Framework",
      "category": "methodology",
      "agent": "claude-code",
      "content": "Core philosophy: We should not make the same mistake twice. Implements error logging with resolution patterns, pre-search deduplication to avoid repeating analysis, solution templates as building blocks, and pattern libraries for recurring problems.\n",
      "tags": [
        "methodology",
        "automated"
      ],
      "related_docs": []
    },
    {
      "id": "learning-8654075db71db066",
      "timestamp": "2025-12-01T02:15:32Z",
      "topic": "Cortex Cloudflare Access Authentication",
      "category": "infrastructure",
      "agent": "claude-code",
      "content": "Service token authentication is the correct method for Cortex API access. Use CF-Access-Client-Id and CF-Access-Client-Secret headers instead of Bearer token. CortexAuthService class implements retry logic with exponential backoff. Token format: CLIENT_ID.SECRET (32+28 chars separated by dot).\n",
      "tags": [
        "infrastructure",
        "automated"
      ],
      "related_docs": []
    },
    {
      "id": "learning-8e93ad067f02d85b",
      "timestamp": "2025-12-01T02:15:36Z",
      "topic": "USACF Multi-Agent Search Framework",
      "category": "framework",
      "agent": "claude-code",
      "content": "Universal Search Algorithm for Claude Flow implements 20+ AI research techniques including step-back prompting, ambiguity clarification, multi-hop reasoning, and iterative refinement. Enables sophisticated query handling across heterogeneous knowledge sources.\n",
      "tags": [
        "framework",
        "automated"
      ],
      "related_docs": []
    },
    {
      "id": "learning-934bd44ce84d5835",
      "timestamp": "2025-12-01T02:15:40Z",
      "topic": "Local Development Sync Patterns",
      "category": "development",
      "agent": "claude-code",
      "content": "Local development environment synced with production via Cortex and NocoDB integration. Key patterns: retry logic with exponential backoff, graceful error handling, environment variable management (.env.local vs .env), and MCP server health checking.\n",
      "tags": [
        "development",
        "automated"
      ],
      "related_docs": []
    },
    {
      "id": "learning-2b2e48928ca7a96a",
      "timestamp": "2025-12-01T02:15:43Z",
      "topic": "Claude Environments Configuration",
      "category": "infrastructure",
      "agent": "claude-code",
      "content": "Unified Claude Code environment with multiple variants: claude (base), claude-zai (Z.AI integration), claude-flow (swarm orchestration). Each has specific MCP server configurations and capabilities. Central .env file at codebuild root provides all credentials.\n",
      "tags": [
        "infrastructure",
        "automated"
      ],
      "related_docs": []
    },
    {
      "id": "learning-deep-crawl-campfire-001",
      "timestamp": "2025-12-01T05:20:00Z",
      "topic": "Project-Campfire Deep Crawl - Complete Architecture",
      "category": "deep-crawl",
      "agent": "claude-code",
      "content": "20-agent swarm deep crawl of project-campfire: Next.js 15.1.0 + React 19.0.0 LMS with PayloadCMS 3.65.0 backend. 22 files in apps/web, 13 PayloadCMS collections (150+ fields), 4 API routes (checkout, progress, stripe/brevo webhooks). Turborepo monorepo with pnpm. Prism Refraction design system. 12 courses with 3 impact levels x 4 capability levels pricing ($499-$3,979). CRITICAL: Auth not implemented - NextAuth.js 5.0.0-beta.4 configured but no middleware/permission checks.",
      "tags": [
        "deep-crawl",
        "project-campfire",
        "architecture",
        "swarm"
      ],
      "related_docs": []
    },
    {
      "id": "learning-deep-crawl-campfire-002",
      "timestamp": "2025-12-01T05:20:00Z",
      "topic": "Project-Campfire Integrations & Security Gaps",
      "category": "deep-crawl",
      "agent": "claude-code",
      "content": "Integrations: Stripe (fully implemented), Brevo (transactional email), Formbricks (surveys), PostHog (analytics). NOT IMPLEMENTED: Cal.com (scheduling), OpenAI (AI features). SECURITY GAPS: No auth middleware, all routes publicly accessible, no permission system despite 5 roles defined (anonymous, free, business, instructor, admin). Specs v2.0.0 approved (102 tasks, 249 hours planned).",
      "tags": [
        "deep-crawl",
        "integrations",
        "security",
        "gaps"
      ],
      "related_docs": []
    },
    {
      "id": "learning-github-crawl-001",
      "timestamp": "2025-12-01T05:29:00Z",
      "topic": "GitHub Repos Crawl - Complete Inventory",
      "category": "github-crawl",
      "agent": "claude-code",
      "content": "20-agent swarm crawled 29 repos across 4 GitHub accounts. Personal (adambkovacs): 14 repos, 9 active in 2025, focus on AI/MCP tools (claude-flow, codex, whisper-x). The-Talent-Foundation: 3 repos, ttf-web-nextjs ready for Vercel. OPEN-Talent-Society: 4 repos (3 public), focus on People Industry AI (rpls-dashboard, JD-Auditor). AI-Enablement-Academy: 8 repos, project-campfire is primary LMS (Next.js 15/PayloadCMS).",
      "tags": [
        "github-crawl",
        "inventory",
        "swarm"
      ],
      "related_docs": []
    },
    {
      "id": "learning-github-crawl-002",
      "timestamp": "2025-12-01T05:29:00Z",
      "topic": "GitHub Tech Ecosystem Summary",
      "category": "github-crawl",
      "agent": "claude-code",
      "content": "Tech ecosystem across 29 repos: Frontend (Next.js 15, React 18, SvelteKit, Vite), Backend (Express, PayloadCMS 3, Drupal 10), Databases (PostgreSQL, Supabase, Neon, DuckDB), AI/ML (Google Gemini 2.5, OpenAI GPTs, Lightcast API, Claude/MCP), DevOps (Docker, GitHub Actions, Netdata/Kuma/Dozzle). Primary languages: TypeScript (12), JavaScript (5), Python (4), Shell (4), Rust (1).",
      "tags": [
        "github-crawl",
        "tech-stack",
        "ecosystem"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-crawl-001",
      "timestamp": "2025-12-01T05:35:00Z",
      "topic": "Cortex Knowledge Base Crawl - Complete Inventory",
      "category": "cortex-crawl",
      "agent": "claude-code",
      "content": "15-agent swarm crawled Cortex knowledge base (https://cortex.aienablement.academy): SiYuan platform with 10 notebooks, 342 total documents. Top notebooks: Agents (101 automation runbooks), Projects (90 docs), Knowledge Base (81 docs), Logs & Change History (33 docs). Key capabilities: doc-ingest, cortex-siyuan-ops, n8n-operations, research-intelligence. Stewardship workflow: Git sync → Cortex import → Claude sync → Automation Inventory dashboard.",
      "tags": [
        "cortex-crawl",
        "knowledge-base",
        "swarm"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-crawl-002",
      "timestamp": "2025-12-01T05:35:00Z",
      "topic": "Cortex Architecture & Integrations",
      "category": "cortex-crawl",
      "agent": "claude-code",
      "content": "Cortex architecture: 5 core skills (cortex-task-log, cortex-notebook-curation, doc-sync, backup-rotation, embedding-refresh). Key integrations: NocoDB (task management), Hook automation, Claude sync. Templates: Technical-Documentation, Integration-Testing, Sprint-Planning, Learning-Capture, Task-Planning. Infrastructure docs: Credential-Management-System, NocoDB-Task-Assignment-Protocol, Claude Environments. API: Token 0fkvtzw0jrat2oht with Cloudflare Access protection.",
      "tags": [
        "cortex-crawl",
        "architecture",
        "integrations"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-deep-crawl-001",
      "timestamp": "2025-12-01T06:00:00Z",
      "topic": "Cortex Deep Crawl - Full Block Analysis",
      "category": "cortex-deep-crawl",
      "agent": "claude-code",
      "content": "20-agent swarm FULL deep crawl of Cortex: 26,937 total blocks analyzed (not just 342 documents). Block types: 13,261 paragraphs, 7,314 list items, 2,659 headings, 1,999 lists, 531 tables, 471 code blocks (GOLD - scripts/configs), 342 docs, 302 text, 54 quotes. Code blocks contain: agent implementations, MCP configs, hook scripts, API schemas, Kubernetes manifests, Docker compose files.",
      "tags": [
        "cortex-deep-crawl",
        "full-analysis",
        "swarm"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-deep-crawl-002",
      "timestamp": "2025-12-01T06:00:00Z",
      "topic": "Implementation Status - Agents, Hooks, MCPs",
      "category": "cortex-deep-crawl",
      "agent": "claude-code",
      "content": "IMPLEMENTED: 49 agents in claude-zai (doc-ingest, cortex-siyuan-ops, nocodb-admin, ollama-orchestrator, proxmox-ops, etc.), 19 hooks in claude-code (pre-task, post-task, memory-store, sync-memory-to-supabase, etc.), 9 MCPs in mcp-servers (cortex, github, perplexity, context7, codex-subagents, etc.). GAPS: claude-code has 0 agents (needs sync from claude-zai).",
      "tags": [
        "cortex-deep-crawl",
        "implementation-status",
        "gaps"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-deep-crawl-003",
      "timestamp": "2025-12-01T06:00:00Z",
      "topic": "Actionable Gaps - MCPs to Create",
      "category": "cortex-deep-crawl",
      "agent": "claude-code",
      "content": "MCPs DOCUMENTED but NOT IMPLEMENTED: HIGH PRIORITY: docmost-mcp (wiki), qdrant-mcp (vector DB), stripe-agent-toolkit (payments). MEDIUM: oci-mcp (Oracle Cloud), hubspot-mcp (CRM), brevo-mcp (email), proxmox-mcp (VM management). LOW: ghost-mcp (blog). Action: Create MCP wrappers in mcp-servers/ directory.",
      "tags": [
        "cortex-deep-crawl",
        "mcp-gaps",
        "actionable"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-deep-crawl-004",
      "timestamp": "2025-12-01T06:00:00Z",
      "topic": "Actionable Gaps - Infrastructure to Deploy",
      "category": "cortex-deep-crawl",
      "agent": "claude-code",
      "content": "INFRASTRUCTURE DOCUMENTED but NOT DEPLOYED: Kubernetes deployment (k8s/deployment.yml), ZAI-Flow API stack (Docker compose with postgres/redis/nginx), Prometheus monitoring, Cloudflare Workers MCP architecture. All configs exist in Cortex code blocks - need to extract and deploy.",
      "tags": [
        "cortex-deep-crawl",
        "infrastructure-gaps",
        "actionable"
      ],
      "related_docs": []
    },
    {
      "id": "learning-campfire-deep-crawl-api-003",
      "timestamp": "2025-12-01T07:15:00Z",
      "topic": "Project-Campfire API Routes - Deep Analysis",
      "category": "campfire-deep-crawl",
      "agent": "claude-code",
      "content": "4 API routes analyzed in depth: (1) /api/checkout (201 lines) - Stripe checkout WORKING but NO AUTH CHECK, userId optional parameter. (2) /api/progress/complete-lesson - Returns dummy success, implementation commented out with TODO. (3) /api/webhooks/stripe (209 lines) - Signature verification implemented, event handlers all TODO comments. (4) /api/webhooks/brevo - Working webhook handler. Libs: brevo.ts (463 lines COMPLETE), stripe.ts (232 lines partial).",
      "tags": [
        "campfire-deep-crawl",
        "api-routes",
        "security",
        "swarm"
      ],
      "related_docs": []
    },
    {
      "id": "learning-campfire-deep-crawl-gaps-004",
      "timestamp": "2025-12-01T07:15:00Z",
      "topic": "Project-Campfire Specs vs Implementation Gap",
      "category": "campfire-deep-crawl",
      "agent": "claude-code",
      "content": "CRITICAL GAPS between specs and implementation: (1) Roles: specs define 5 (anonymous/free/business/instructor/admin), code has 3 (student/instructor/admin). (2) Auth: NextAuth 5.0.0-beta.4 installed but 0% configured - missing middleware.ts, auth routes, auth config. (3) Enrollment: Schema exists but no verification middleware. (4) Permissions: RBAC spec is 611 lines, no guards implemented. (5) Stripe webhooks: Mostly TODO comments. (6) Login page: UI complete but form not connected.",
      "tags": [
        "campfire-deep-crawl",
        "specs-vs-code",
        "gaps"
      ],
      "related_docs": []
    },
    {
      "id": "learning-campfire-deep-crawl-security-005",
      "timestamp": "2025-12-01T07:15:00Z",
      "topic": "Project-Campfire Security Assessment Summary",
      "category": "campfire-deep-crawl",
      "agent": "claude-code",
      "content": "EXISTING auth_architecture_report.json (512 lines) documents ALL vulnerabilities. CRITICAL: No middleware.ts (all routes public), no permission checks, any user can modify any data. HIGH: Enrollment not verified (unenrolled users access courses), API routes unprotected (public can create checkouts). MEDIUM: OAuth UI placeholders only, admin routes unprotected. 4-phase implementation checklist defined: (1) NextAuth setup, (2) Middleware, (3) API protection, (4) Enrollment verification.",
      "tags": [
        "campfire-deep-crawl",
        "security",
        "vulnerabilities",
        "checklist"
      ],
      "related_docs": []
    },
    {
      "id": "learning-campfire-deep-crawl-collections-006",
      "timestamp": "2025-12-01T07:15:00Z",
      "topic": "Project-Campfire PayloadCMS Collections",
      "category": "campfire-deep-crawl",
      "agent": "claude-code",
      "content": "13 PayloadCMS 3.65.0 collections in payload.config.ts (891 lines): users (auth enabled, 3 roles, stripeCustomerId, enrolledCourses), courses (title, slug, impactLevel 1-3, capabilityLevel 1-4, pricing $499-$3,979), modules, lessons (video/article/quiz/assignment/live types), quizzes, progress (completedLessons, progressPercentage 0-100, quizScores, certificateIssued), enrollments (status: active/completed/expired/refunded, Stripe IDs, dates), media, testimonials, form-submissions, pages, settings, course-categories.",
      "tags": [
        "campfire-deep-crawl",
        "payloadcms",
        "schema"
      ],
      "related_docs": []
    },
    {
      "id": "learning-campfire-deep-crawl-roadmap-007",
      "timestamp": "2025-12-01T07:15:00Z",
      "topic": "Project-Campfire Implementation Roadmap",
      "category": "campfire-deep-crawl",
      "agent": "claude-code",
      "content": "EPICS.md defines 10 epics, 102 tasks, 249 hours: Epic 1 Landing & Marketing (38h, P0), Epic 2 Authentication (37h, P0 - CRITICAL BLOCKER), Epic 3 Enrollment & Payments (26h, P0), Epic 4 Course Delivery (29h, P0), Epic 5 Progress Tracking (18h, P1), Epic 6 Admin Dashboard (22h, P1), Epic 7 Instructor Portal (13h, P2), Epic 8 Analytics (9h, P2), Epic 9 Integrations (14h, P2), Epic 10 AI Features (43h, P3). 4 sprints, ~55 days estimated.",
      "tags": [
        "campfire-deep-crawl",
        "roadmap",
        "epics",
        "planning"
      ],
      "related_docs": []
    },
    {
      "id": "learning-campfire-deep-crawl-actionable-008",
      "timestamp": "2025-12-01T07:15:00Z",
      "topic": "Project-Campfire Actionable Next Steps",
      "category": "campfire-deep-crawl",
      "agent": "claude-code",
      "content": "IMMEDIATE (9h): Create middleware.ts (2h), Configure NextAuth with credentials provider (4h), Add session checks to API routes (3h). SHORT-TERM (11h): Complete Stripe webhook handlers (4h), Add enrollment verification middleware (3h), Configure OAuth providers (2h), Connect login form (2h). MEDIUM-TERM (56h): Implement instructor portal (13h), Add AI features (43h). BLOCKER: Epic 2 Authentication must be completed before any other work can proceed safely.",
      "tags": [
        "campfire-deep-crawl",
        "actionable",
        "priorities",
        "effort"
      ],
      "related_docs": []
    },
    {
      "id": "learning-b3ae597e5b9896cf",
      "timestamp": "2025-12-01T17:40:47Z",
      "topic": "Learnings and Patterns Hooks Require Manual Invocation",
      "category": "automation",
      "agent": "claude-code",
      "content": "The .claude/hooks/log-learning.sh and save-pattern.sh scripts exist and correctly write to Supabase learnings/patterns tables. However, they require MANUAL invocation - they are NOT automatically triggered by claude-flow swarm operations or MCP memory tools. Swarm agents only auto-populate agent_memory via mcp__claude-flow__memory_usage. To capture learnings/patterns during swarm work, agents must explicitly call these bash hooks or the hooks must be integrated into post-task workflows.\n",
      "tags": [
        "automation",
        "automated"
      ],
      "related_docs": []
    },
    {
      "id": "learning-6264a4615912c3d1",
      "timestamp": "2025-12-01T21:14:47Z",
      "topic": "Payload CMS v3 RootLayout ServerFunction Fix",
      "category": "PayloadCMS v3.65.0 with Next.js 15 requires serverFunction prop on RootLayout. Auto-generated layout.tsx is missing this prop causing 500 error: 'ServerFunctionsProvider requires a serverFunction prop'. FIX: Import handleServerFunctions from @payloadcms/next/layouts and wrap in async server action with 'use server' directive. Pass as serverFunction prop to RootLayout along with config and importMap.",
      "agent": "claude-code",
      "content": "infrastructure\n",
      "tags": [
        "PayloadCMS v3.65.0 with Next.js 15 requires serverFunction prop on RootLayout. Auto-generated layout.tsx is missing this prop causing 500 error: 'ServerFunctionsProvider requires a serverFunction prop'. FIX: Import handleServerFunctions from @payloadcms/next/layouts and wrap in async server action with 'use server' directive. Pass as serverFunction prop to RootLayout along with config and importMap.",
        "automated"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-excellence-001",
      "timestamp": "2025-12-01T22:30:00Z",
      "topic": "SiYuan Block Reference Creation - insertBlock vs setBlockAttrs",
      "category": "cortex-siyuan",
      "agent": "claude-code",
      "content": "CRITICAL DISTINCTION: Use /api/block/insertBlock with ((block-id)) syntax to create refs. The refs table stores block_id (source) and def_block_id (target where backlinks appear). /api/attr/setBlockAttrs does NOT create refs - it only sets metadata attributes. For backlinks to appear, you MUST inject ((block-id)) syntax into content via insertBlock or appendBlock API calls.",
      "tags": [
        "cortex",
        "siyuan",
        "refs",
        "backlinks",
        "api"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-excellence-002",
      "timestamp": "2025-12-01T22:30:00Z",
      "topic": "Progressive Disclosure Patterns for AI+Human Documents",
      "category": "cortex-siyuan",
      "agent": "claude-code",
      "content": "Progressive disclosure methodology for Cortex documents optimized for both AI agents and humans: (1) TLDR Pattern - Always start with one-sentence summary AI can use without reading full doc. (2) Fold Pattern - Use data-fold='0' (collapsed) and data-fold='1' (expanded) to hide details by default. (3) Structured Metadata - YAML front matter enables SQL queries and AI parsing. (4) Block Attributes - custom-* attributes for queryability. Best practice: Summary first, Quick Reference expanded, Technical Details/Code Examples/API Reference collapsed.",
      "tags": [
        "cortex",
        "progressive-disclosure",
        "ai-optimization",
        "documentation"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-excellence-003",
      "timestamp": "2025-12-01T22:30:00Z",
      "topic": "SiYuan Templates API - Underutilized Feature",
      "category": "cortex-siyuan",
      "agent": "claude-code",
      "content": "SiYuan Templates API is underutilized (part of the 81% unused features). Created cortex-template-create.sh hook that implements consistent document creation using /api/filetree/createDocWithMd. Template types: learning, task, adr, sop, meeting, daily, project, reference. Each template auto-sets custom attributes (custom-type, custom-agent, custom-status) for SQL queryability. Templates auto-route to correct PARA notebook based on type.",
      "tags": [
        "cortex",
        "templates",
        "automation",
        "hooks"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-excellence-004",
      "timestamp": "2025-12-01T22:30:00Z",
      "topic": "SiYuan Export API Capabilities",
      "category": "cortex-siyuan",
      "agent": "claude-code",
      "content": "SiYuan provides comprehensive export APIs: (1) /api/export/exportMdContent - Export single document to markdown. (2) /api/export/exportHTML - Export to HTML with assets. (3) /api/export/exportNotebookMd - Export entire notebook as markdown archive. (4) /api/export/exportSY - Export in SiYuan native format. (5) /api/export/preview - Get HTML preview of single block. Created cortex-export.md command documenting all endpoints with curl examples and MCP tool patterns.",
      "tags": [
        "cortex",
        "export",
        "api",
        "backup"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-excellence-005",
      "timestamp": "2025-12-01T22:30:00Z",
      "topic": "PARA Notebook ID Migration 2023 to 2025",
      "category": "cortex-infrastructure",
      "agent": "claude-code",
      "content": "PARA notebook IDs were migrated from 2023* format to 2025* format. Updated IDs (effective 2025-12-01): Projects=20251103053911-8ex6uns, Areas=20251201183343-543piyt, Resources=20251201183343-ujsixib, Archives=20251201183343-xf2snc8, Knowledge Base=20251103053840-moamndp. Updated 7 files: agents.json, 3 hooks, 3 docs. Grep verification confirmed no remaining old IDs in functional code.",
      "tags": [
        "cortex",
        "para",
        "migration",
        "notebook-ids"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-excellence-006",
      "timestamp": "2025-12-01T22:30:00Z",
      "topic": "Orphan Detection and Fix Strategy",
      "category": "cortex-siyuan",
      "agent": "claude-code",
      "content": "Orphan documents are blocks with no incoming refs in def_block_id column. Detection SQL: SELECT id FROM blocks WHERE type='d' AND id NOT IN (SELECT DISTINCT def_block_id FROM refs). Fix strategy: (1) Identify well-connected hub documents. (2) Use insertBlock to inject ((orphan-id)) refs from hubs to orphans. (3) Verify refs table has new entries. (4) Rebuild search index. Achieved 1.41% orphan rate (down from ~85%) using this approach.",
      "tags": [
        "cortex",
        "orphans",
        "refs",
        "sql"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-excellence-007",
      "timestamp": "2025-12-01T22:30:00Z",
      "topic": "SiYuan Feature Utilization - 19% Used, 81% Untapped",
      "category": "cortex-siyuan",
      "agent": "claude-code",
      "content": "Cortex Excellence Audit revealed only 19% of SiYuan API features utilized. Currently used: createDocWithMd, appendBlock, insertBlock, getBlockAttrs, setBlockAttrs, SQL queries, fullTextSearch, listNotebooks, getNotebookConf. HIGH ROI underutilized features: Templates API, Export/Import, Notifications, Assets/file attachments, foldBlock/unfoldBlock for progressive disclosure, Dashboards for visual knowledge maps.",
      "tags": [
        "cortex",
        "siyuan",
        "features",
        "audit"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-excellence-008",
      "timestamp": "2025-12-01T22:30:00Z",
      "topic": "Cortex Authentication - Dual Auth Required",
      "category": "cortex-infrastructure",
      "agent": "claude-code",
      "content": "Cortex API requires dual authentication: (1) SiYuan token via Authorization: Token header. (2) Cloudflare Zero Trust via CF-Access-Client-Id and CF-Access-Client-Secret headers. Both must be present for all API calls. Current credentials: Token=0fkvtzw0jrat2oht, CF-Client-Id=6c0fe301311410aea8ca6e236a176938.access, CF-Client-Secret=714c7fc0d9cf883295d1c5eb730ecb64e9b5fe0418605009cafde13b4900afb3.",
      "tags": [
        "cortex",
        "authentication",
        "cloudflare",
        "security"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-excellence-009",
      "timestamp": "2025-12-01T22:30:00Z",
      "topic": "Cortex-Ops Agent Created - Knowledge Management Excellence",
      "category": "cortex-agent",
      "agent": "claude-code",
      "content": "Created cortex-ops.md agent (HIGH priority gap filled). Agent responsibilities: Knowledge capture, PARA organization, Cross-system integration (NocoDB tasks), Progressive disclosure, Block excellence. Documents complete SiYuan API operations, templates for learning/task/ADR documents, workflows for task documentation/learning capture/orphan prevention/archive migration, integration with 3-layer memory architecture.",
      "tags": [
        "cortex",
        "agent",
        "knowledge-management",
        "para"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-excellence-010",
      "timestamp": "2025-12-01T22:30:00Z",
      "topic": "3-Layer Memory Architecture Sync",
      "category": "infrastructure",
      "agent": "claude-code",
      "content": "3-layer memory architecture for persistent AI agent memory: Layer 1 - Supabase Cloud DB (https://zxcrbcmdxpqprpxhsntc.supabase.co) for persistent, queryable data synced on task completion. Layer 2 - File-based AgentDB (.claude/.agentdb/learnings.json, patterns.json) for fast local access synced on learning. Layer 3 - Cortex/SiYuan for human+AI knowledge base synced on document creation. All layers must be kept in sync for continuity.",
      "tags": [
        "memory",
        "3-layer",
        "supabase",
        "agentdb",
        "cortex"
      ],
      "related_docs": []
    },
    {
      "id": "learning-8f9fc944a1cebfcb",
      "timestamp": "2025-12-01T22:55:00Z",
      "topic": "Cortex Excellence Audit - Complete Summary",
      "category": "Comprehensive audit of SiYuan/Cortex capabilities achieved: 1.41% orphan rate (down from ~85%), identified 19% feature utilization with 81% untapped potential. Key deliverables: cortex-ops.md agent, cortex-export.md command, cortex-progressive-disclosure.md skill, cortex-template-create.sh hook. Critical learnings: insertBlock creates refs (not setBlockAttrs), progressive disclosure patterns, Templates API, Export APIs, PARA notebook ID migration, 3-layer memory sync. Updated 7 files with new notebook IDs.",
      "agent": "claude-code",
      "content": "cortex-audit\n",
      "tags": [
        "Comprehensive audit of SiYuan/Cortex capabilities achieved: 1.41% orphan rate (down from ~85%), identified 19% feature utilization with 81% untapped potential. Key deliverables: cortex-ops.md agent, cortex-export.md command, cortex-progressive-disclosure.md skill, cortex-template-create.sh hook. Critical learnings: insertBlock creates refs (not setBlockAttrs), progressive disclosure patterns, Templates API, Export APIs, PARA notebook ID migration, 3-layer memory sync. Updated 7 files with new notebook IDs.",
        "automated"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-cleanup-001",
      "timestamp": "2025-12-02T00:30:00Z",
      "topic": "Bloated Markdown Files - Embedded Footnotes Pattern",
      "category": "infrastructure",
      "agent": "claude-code",
      "content": "Bloated markdown files can exceed Claude Code's 25000 token limit due to embedded footnotes containing entire documents. The [^1]: syntax can embed full content inline, causing files like cortex-siyuan-ops.md to bloat to 200KB (61838 tokens). SOLUTION: Keep modular clean files, delete bloated duplicates, use ((block-id)) refs instead of embedding. DETECTED: 5 duplicate bloated files in claude-zai were removed.",
      "tags": [
        "bloated-files",
        "footnotes",
        "token-limits",
        "cortex"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-cleanup-002",
      "timestamp": "2025-12-02T00:30:00Z",
      "topic": "PARA Notebook IDs - Complete Structure 2025-12-01",
      "category": "cortex-infrastructure",
      "agent": "claude-code",
      "content": "Updated PARA notebook structure (effective 2025-12-01): 01 Projects=20251103053911-8ex6uns (103 docs), 02 Areas=20251201183343-543piyt (80 docs), 03 Resources=20251201183343-ujsixib (150 docs), 04 Archives=20251201183343-xf2snc8 (33 docs), 05 Knowledge Base=20251103053840-moamndp (28 docs), 11 Agents=20251103053916-bq6qbgu (37 docs). Total: 431 docs across 6 notebooks. The '11 Agents' notebook was missing from documentation and has been added to all relevant files.",
      "tags": [
        "para",
        "notebooks",
        "cortex",
        "structure"
      ],
      "related_docs": []
    },
    {
      "id": "learning-cortex-cleanup-003",
      "timestamp": "2025-12-02T00:30:00Z",
      "topic": "Cortex Documentation Cleanup - Files Modified",
      "category": "documentation",
      "agent": "claude-code",
      "content": "Cortex documentation cleanup completed. FILES UPDATED (3): codebuild/.claude/agents/core/cortex-ops.md (added 11 Agents notebook, doc counts), codebuild/.claude/skills/cortex-api-ops.md (same), codebuild/.claude/commands/cortex-export.md (updated backup loop). FILES DELETED (5): All bloated duplicates in claude-zai/.claude/agents/, plugins/, and marketplaces/ containing cortex-siyuan-ops.md (200KB each). Clean reference at codebuild/.claude/agents/core/cortex-ops.md (487 lines, ~15k tokens).",
      "tags": [
        "cleanup",
        "documentation",
        "cortex",
        "files"
      ],
      "related_docs": []
    },
    {
      "id": "learning-wikilink-audit-001",
      "timestamp": "2025-12-02T00:45:00Z",
      "topic": "SiYuan Wiki-Link vs Block-Ref Syntax",
      "category": "cortex-siyuan",
      "agent": "claude-code",
      "content": "CRITICAL DISTINCTION: [[wiki-style]] links in SiYuan are plain text that do NOT create refs in the refs table. They render as non-clickable text. Use ((block-id)) syntax to create proper block references that: 1) Create entry in refs table, 2) Render as clickable links, 3) Show in backlinks panel. Audit found 30 blocks with [[]] syntax, 12 were convertible (target doc exists), 18 are template placeholders or need governance docs created.",
      "tags": [
        "cortex",
        "siyuan",
        "wiki-links",
        "block-refs",
        "link-syntax"
      ],
      "related_docs": []
    },
    {
      "id": "learning-wikilink-audit-002",
      "timestamp": "2025-12-02T00:45:00Z",
      "topic": "Wiki-Link Conversion Process",
      "category": "cortex-api",
      "agent": "claude-code",
      "content": "Wiki-link to block-ref conversion process: 1) Query blocks with [[]] pattern using SQL: SELECT id, content FROM blocks WHERE type='p' AND content LIKE '%[[%'. 2) Search for target documents by name to get block IDs. 3) Use /api/block/updateBlock to replace [[DocName]] with ((block-id)). 4) Verify refs table has new entries. Successfully converted 12 wiki-links: 2x [[GEM_Feri]]→((20251201183622-purp5sq)), 1x [[cortex-ops]]→((20251201232226-5fga9ca)), 9x [[AI-Enablement-Academy-ICP-List]]→((20251201183459-6l73yyk)).",
      "tags": [
        "cortex",
        "conversion",
        "api",
        "wiki-links"
      ],
      "related_docs": []
    },
    {
      "id": "learning-wikilink-audit-003",
      "timestamp": "2025-12-02T00:45:00Z",
      "topic": "Wiki-Link Categories in Cortex",
      "category": "knowledge-management",
      "agent": "claude-code",
      "content": "Wiki-links in Cortex fall into 3 categories: (1) CONVERTIBLE - Target document exists, can be replaced with ((block-id)). (2) TEMPLATE PLACEHOLDERS - Intentional placeholders like [[Task-ID]], [[Related-Doc-1]] in templates, should remain as text. (3) GOVERNANCE DOCS NEEDED - References to non-existent governance documents like [[Tag Taxonomy]], [[Cortex Ontology Map]], [[Cortex Dashboard Directory]] - these need documents created before conversion.",
      "tags": [
        "cortex",
        "wiki-links",
        "categories",
        "governance"
      ],
      "related_docs": []
    },
    {
      "id": "learning-mcp-optimization-001",
      "timestamp": "2025-12-02T02:15:00Z",
      "topic": "MCP Token Optimization - Config Location Discovery",
      "category": "infrastructure",
      "agent": "claude-code",
      "content": "CRITICAL DISCOVERY: Claude Code stores MCP configuration in ~/.claude_code/.claude.json under projects[path].mcpServers, NOT in .claude/mcp.json as expected. Project-level mcp.json files are IGNORED. To change MCPs, edit ~/.claude_code/.claude.json directly. Reduced token usage from 213.9k (107%) to ~80k (~40%) by converting heavy MCPs to on-demand skills.",
      "tags": [
        "mcp",
        "token-optimization",
        "configuration",
        "claude-code"
      ],
      "related_docs": []
    },
    {
      "id": "learning-mcp-optimization-002",
      "timestamp": "2025-12-02T02:15:00Z",
      "topic": "MCP to Skill Conversion Strategy",
      "category": "optimization",
      "agent": "claude-code",
      "content": "Strategy for reducing MCP token overhead: Convert heavy MCPs (>20 tools) to on-demand skills. Skills load only when invoked, costing 0 tokens at startup. Removed MCPs: digitalocean-mcp (13 tools), codex-subagents (4 tools), flow-nexus (99 tools!), ruv-swarm (25 tools). Kept essential MCPs: claude-flow (88 tools, core), context7 (2), playwright (25), zai-mcp-server (2), cortex (2), brevo-mcp (13). Each skill includes mcp_install instructions for temporary enablement.",
      "tags": [
        "mcp",
        "skills",
        "token-optimization",
        "on-demand"
      ],
      "related_docs": []
    },
    {
      "id": "learning-agentdb-auto-sync-001",
      "timestamp": "2025-12-02T02:40:00Z",
      "topic": "AgentDB Automatic Supabase Sync Implementation",
      "category": "infrastructure",
      "agent": "claude-code",
      "content": "Implemented automatic 3-layer memory sync from local AgentDB JSON files to Supabase cloud. Created agentdb-supabase-sync.sh hook that: (1) Reads learnings.json and patterns.json from .agentdb folder, (2) Syncs to Supabase REST API with upsert (Prefer: resolution=merge-duplicates), (3) Tracks last sync timestamp in /tmp/agentdb-sync-state.json for incremental sync, (4) Supports both full and incremental modes. Hook integrated into: Stop hooks in settings.json, session-end.sh workflow. Also created /sync-agentdb slash command for manual sync. This ensures ALL learnings and patterns are automatically persisted to Supabase cloud on session end.",
      "tags": [
        "agentdb",
        "supabase",
        "automation",
        "hooks",
        "3-layer-memory"
      ],
      "related_docs": [
        "agentdb-supabase-sync.sh",
        "session-end.sh",
        "settings.json"
      ]
    },
    {
      "id": "learning-campfire-auth-simplify-001",
      "timestamp": "2025-12-02T03:30:00Z",
      "topic": "Project Campfire Auth Simplification - 5 Methods to 2",
      "category": "authentication",
      "agent": "claude-code",
      "content": "Simplified authentication from 5 methods (email+password, email+code, Google, GitHub, LinkedIn, Microsoft) to 2 (Google OAuth + Magic Link). Removed CredentialsProvider and GitHubProvider from auth.ts. Magic link via Brevo API with template ID 3. Google OAuth covers 95% of use cases. Clean login page UI with just 2 options.",
      "tags": ["project-campfire", "authentication", "simplification", "magic-link", "oauth"],
      "related_docs": []
    },
    {
      "id": "learning-campfire-onboarding-001",
      "timestamp": "2025-12-02T03:30:00Z",
      "topic": "Project Campfire 2-Step Onboarding Flow",
      "category": "user-experience",
      "agent": "claude-code",
      "content": "Created 2-step onboarding at /onboarding: Step 1 collects firstName/lastName, Step 2 collects intent (personal_learning, team_training, exploring, instructor) with conditional company field for B2B. API at /api/onboarding/complete updates PayloadCMS user and sets onboardingCompleted=true. Session refresh after completion redirects to dashboard.",
      "tags": ["project-campfire", "onboarding", "user-flow", "payloadcms"],
      "related_docs": []
    },
    {
      "id": "learning-campfire-sessionprovider-001",
      "timestamp": "2025-12-02T03:30:00Z",
      "topic": "NextAuth SessionProvider in Route Group Layouts",
      "category": "nextjs",
      "agent": "claude-code",
      "content": "CRITICAL: useSession() hook requires SessionProvider context. In Next.js 15 with route groups, SessionProvider must be added to EACH route group layout that uses useSession(). Created AuthProvider wrapper component ('use client') and added to marketing layout. The 'use client' directive alone doesn't prevent prerendering - SessionProvider context is required. export const dynamic = 'force-dynamic' doesn't work with client components.",
      "tags": ["project-campfire", "nextjs", "nextauth", "sessionprovider", "prerendering"],
      "related_docs": []
    },
    {
      "id": "learning-campfire-payloadcms-local-api-001",
      "timestamp": "2025-12-02T03:30:00Z",
      "topic": "PayloadCMS Local API Patterns for Admin Pages",
      "category": "payloadcms",
      "agent": "claude-code",
      "content": "PayloadCMS Local API patterns for server components: (1) Initialize with getPayload({ config }). (2) Use payload.find() with where, limit, sort, depth params. (3) For relationships, use depth:1 to populate related docs. (4) Handle hasMany relationships with Array.isArray() checks. (5) N+1 queries acceptable for admin pages but should batch for production scale. Wired up 4 admin pages: students, courses, cohorts, events.",
      "tags": ["project-campfire", "payloadcms", "local-api", "admin", "data-fetching"],
      "related_docs": []
    },
    {
      "id": "learning-campfire-payloadcms-vs-nextauth-001",
      "timestamp": "2025-12-02T03:30:00Z",
      "topic": "PayloadCMS Auth vs NextAuth Assessment",
      "category": "architecture",
      "agent": "claude-code",
      "content": "PayloadCMS auth assessment: Built-in email/password and JWT auth are good. BUT OAuth (Google, GitHub) requires Enterprise license or community plugins. Magic link is NOT built-in - requires custom implementation or payload-auth package. RECOMMENDATION: Keep NextAuth for OAuth/magic link (already working), use PayloadCMS for user data storage. Hybrid approach is optimal - NextAuth handles auth, PayloadCMS handles data.",
      "tags": ["project-campfire", "payloadcms", "nextauth", "architecture", "assessment"],
      "related_docs": []
    },
    {
      "id": "learning-campfire-collections-001",
      "timestamp": "2025-12-02T03:30:00Z",
      "topic": "Project Campfire PayloadCMS Collections Extended",
      "category": "schema",
      "agent": "claude-code",
      "content": "Extended PayloadCMS collections: (1) Users - added headline, socials (linkedin, twitter, website, github), company, intent, onboardingCompleted, createdVia. (2) Cohorts - new collection with name, slug, course, startDate, endDate, maxParticipants, instructor, participants, status (upcoming/active/completed/cancelled), timezone, meetingLink. (3) Events - hackathon/workshop/webinar/impact_workshop types with full registration system.",
      "tags": ["project-campfire", "payloadcms", "schema", "collections", "cohorts", "events"],
      "related_docs": []
    },
    {
      "id": "learning-campfire-dashboard-001",
      "timestamp": "2025-12-02T03:30:00Z",
      "topic": "Project Campfire Dashboard Architecture",
      "category": "frontend",
      "agent": "claude-code",
      "content": "Dashboard architecture: (1) Route group (dashboard) with shared layout containing SessionProvider, sidebar, header. (2) Role-based navigation - students see My Courses/Certificates, instructors/admins see Academy Admin section. (3) Pages: /dashboard (overview), /dashboard/courses (enrolled), /dashboard/certificates, /dashboard/profile (settings). (4) Academy Admin: /academy-admin/* for courses, cohorts, events, students management.",
      "tags": ["project-campfire", "dashboard", "role-based", "navigation", "layout"],
      "related_docs": []
    }
  ]
}
